{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright 2021-2022 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nrequire(\"core-js/modules/es.array.push.js\");\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fragmentWithRequestN = exports.fragment = exports.isFragmentable = void 0;\nvar Frames_1 = require(\"./Frames\");\nfunction isFragmentable(payload, fragmentSize, frameType) {\n  if (fragmentSize === 0) {\n    return false;\n  }\n  return payload.data.byteLength + (payload.metadata ? payload.metadata.byteLength + Frames_1.Lengths.METADATA : 0) + (frameType == Frames_1.FrameTypes.REQUEST_STREAM || frameType == Frames_1.FrameTypes.REQUEST_CHANNEL ? Frames_1.Lengths.REQUEST : 0) > fragmentSize;\n}\nexports.isFragmentable = isFragmentable;\nfunction fragment(streamId, payload, fragmentSize, frameType, isComplete) {\n  var dataLength, firstFrame, remaining, metadata, metadataLength, metadataPosition, nextMetadataPosition, nextMetadataPosition, dataPosition, data, nextDataPosition, nextDataPosition;\n  var _a, _b;\n  if (isComplete === void 0) {\n    isComplete = false;\n  }\n  return __generator(this, function (_c) {\n    switch (_c.label) {\n      case 0:\n        dataLength = (_b = (_a = payload.data) === null || _a === void 0 ? void 0 : _a.byteLength) !== null && _b !== void 0 ? _b : 0;\n        firstFrame = frameType !== Frames_1.FrameTypes.PAYLOAD;\n        remaining = fragmentSize;\n        if (!payload.metadata) return [3 /*break*/, 6];\n        metadataLength = payload.metadata.byteLength;\n        if (!(metadataLength === 0)) return [3 /*break*/, 1];\n        remaining -= Frames_1.Lengths.METADATA;\n        metadata = Buffer.allocUnsafe(0);\n        return [3 /*break*/, 6];\n      case 1:\n        metadataPosition = 0;\n        if (!firstFrame) return [3 /*break*/, 3];\n        remaining -= Frames_1.Lengths.METADATA;\n        nextMetadataPosition = Math.min(metadataLength, metadataPosition + remaining);\n        metadata = payload.metadata.slice(metadataPosition, nextMetadataPosition);\n        remaining -= metadata.byteLength;\n        metadataPosition = nextMetadataPosition;\n        if (!(remaining === 0)) return [3 /*break*/, 3];\n        firstFrame = false;\n        return [4 /*yield*/, {\n          type: frameType,\n          flags: Frames_1.Flags.FOLLOWS | Frames_1.Flags.METADATA,\n          data: undefined,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 2:\n        _c.sent();\n        metadata = undefined;\n        remaining = fragmentSize;\n        _c.label = 3;\n      case 3:\n        if (!(metadataPosition < metadataLength)) return [3 /*break*/, 6];\n        remaining -= Frames_1.Lengths.METADATA;\n        nextMetadataPosition = Math.min(metadataLength, metadataPosition + remaining);\n        metadata = payload.metadata.slice(metadataPosition, nextMetadataPosition);\n        remaining -= metadata.byteLength;\n        metadataPosition = nextMetadataPosition;\n        if (!(remaining === 0 || dataLength === 0)) return [3 /*break*/, 5];\n        return [4 /*yield*/, {\n          type: Frames_1.FrameTypes.PAYLOAD,\n          flags: Frames_1.Flags.NEXT | Frames_1.Flags.METADATA | (metadataPosition === metadataLength && isComplete && dataLength === 0 ? Frames_1.Flags.COMPLETE : Frames_1.Flags.FOLLOWS),\n          data: undefined,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 4:\n        _c.sent();\n        metadata = undefined;\n        remaining = fragmentSize;\n        _c.label = 5;\n      case 5:\n        return [3 /*break*/, 3];\n      case 6:\n        dataPosition = 0;\n        if (!firstFrame) return [3 /*break*/, 8];\n        nextDataPosition = Math.min(dataLength, dataPosition + remaining);\n        data = payload.data.slice(dataPosition, nextDataPosition);\n        remaining -= data.byteLength;\n        dataPosition = nextDataPosition;\n        return [4 /*yield*/, {\n          type: frameType,\n          flags: Frames_1.Flags.FOLLOWS | (metadata ? Frames_1.Flags.METADATA : Frames_1.Flags.NONE),\n          data: data,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 7:\n        _c.sent();\n        metadata = undefined;\n        data = undefined;\n        remaining = fragmentSize;\n        _c.label = 8;\n      case 8:\n        if (!(dataPosition < dataLength)) return [3 /*break*/, 10];\n        nextDataPosition = Math.min(dataLength, dataPosition + remaining);\n        data = payload.data.slice(dataPosition, nextDataPosition);\n        remaining -= data.byteLength;\n        dataPosition = nextDataPosition;\n        return [4 /*yield*/, {\n          type: Frames_1.FrameTypes.PAYLOAD,\n          flags: dataPosition === dataLength ? (isComplete ? Frames_1.Flags.COMPLETE : Frames_1.Flags.NONE) | Frames_1.Flags.NEXT | (metadata ? Frames_1.Flags.METADATA : 0) : Frames_1.Flags.FOLLOWS | Frames_1.Flags.NEXT | (metadata ? Frames_1.Flags.METADATA : 0),\n          data: data,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 9:\n        _c.sent();\n        metadata = undefined;\n        data = undefined;\n        remaining = fragmentSize;\n        return [3 /*break*/, 8];\n      case 10:\n        return [2 /*return*/];\n    }\n  });\n}\n\nexports.fragment = fragment;\nfunction fragmentWithRequestN(streamId, payload, fragmentSize, frameType, requestN, isComplete) {\n  var dataLength, firstFrame, remaining, metadata, metadataLength, metadataPosition, nextMetadataPosition, nextMetadataPosition, dataPosition, data, nextDataPosition, nextDataPosition;\n  var _a, _b;\n  if (isComplete === void 0) {\n    isComplete = false;\n  }\n  return __generator(this, function (_c) {\n    switch (_c.label) {\n      case 0:\n        dataLength = (_b = (_a = payload.data) === null || _a === void 0 ? void 0 : _a.byteLength) !== null && _b !== void 0 ? _b : 0;\n        firstFrame = true;\n        remaining = fragmentSize;\n        if (!payload.metadata) return [3 /*break*/, 6];\n        metadataLength = payload.metadata.byteLength;\n        if (!(metadataLength === 0)) return [3 /*break*/, 1];\n        remaining -= Frames_1.Lengths.METADATA;\n        metadata = Buffer.allocUnsafe(0);\n        return [3 /*break*/, 6];\n      case 1:\n        metadataPosition = 0;\n        if (!firstFrame) return [3 /*break*/, 3];\n        remaining -= Frames_1.Lengths.METADATA + Frames_1.Lengths.REQUEST;\n        nextMetadataPosition = Math.min(metadataLength, metadataPosition + remaining);\n        metadata = payload.metadata.slice(metadataPosition, nextMetadataPosition);\n        remaining -= metadata.byteLength;\n        metadataPosition = nextMetadataPosition;\n        if (!(remaining === 0)) return [3 /*break*/, 3];\n        firstFrame = false;\n        return [4 /*yield*/, {\n          type: frameType,\n          flags: Frames_1.Flags.FOLLOWS | Frames_1.Flags.METADATA,\n          data: undefined,\n          requestN: requestN,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 2:\n        _c.sent();\n        metadata = undefined;\n        remaining = fragmentSize;\n        _c.label = 3;\n      case 3:\n        if (!(metadataPosition < metadataLength)) return [3 /*break*/, 6];\n        remaining -= Frames_1.Lengths.METADATA;\n        nextMetadataPosition = Math.min(metadataLength, metadataPosition + remaining);\n        metadata = payload.metadata.slice(metadataPosition, nextMetadataPosition);\n        remaining -= metadata.byteLength;\n        metadataPosition = nextMetadataPosition;\n        if (!(remaining === 0 || dataLength === 0)) return [3 /*break*/, 5];\n        return [4 /*yield*/, {\n          type: Frames_1.FrameTypes.PAYLOAD,\n          flags: Frames_1.Flags.NEXT | Frames_1.Flags.METADATA | (metadataPosition === metadataLength && isComplete && dataLength === 0 ? Frames_1.Flags.COMPLETE : Frames_1.Flags.FOLLOWS),\n          data: undefined,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 4:\n        _c.sent();\n        metadata = undefined;\n        remaining = fragmentSize;\n        _c.label = 5;\n      case 5:\n        return [3 /*break*/, 3];\n      case 6:\n        dataPosition = 0;\n        if (!firstFrame) return [3 /*break*/, 8];\n        remaining -= Frames_1.Lengths.REQUEST;\n        nextDataPosition = Math.min(dataLength, dataPosition + remaining);\n        data = payload.data.slice(dataPosition, nextDataPosition);\n        remaining -= data.byteLength;\n        dataPosition = nextDataPosition;\n        return [4 /*yield*/, {\n          type: frameType,\n          flags: Frames_1.Flags.FOLLOWS | (metadata ? Frames_1.Flags.METADATA : Frames_1.Flags.NONE),\n          data: data,\n          requestN: requestN,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 7:\n        _c.sent();\n        metadata = undefined;\n        data = undefined;\n        remaining = fragmentSize;\n        _c.label = 8;\n      case 8:\n        if (!(dataPosition < dataLength)) return [3 /*break*/, 10];\n        nextDataPosition = Math.min(dataLength, dataPosition + remaining);\n        data = payload.data.slice(dataPosition, nextDataPosition);\n        remaining -= data.byteLength;\n        dataPosition = nextDataPosition;\n        return [4 /*yield*/, {\n          type: Frames_1.FrameTypes.PAYLOAD,\n          flags: dataPosition === dataLength ? (isComplete ? Frames_1.Flags.COMPLETE : Frames_1.Flags.NONE) | Frames_1.Flags.NEXT | (metadata ? Frames_1.Flags.METADATA : 0) : Frames_1.Flags.FOLLOWS | Frames_1.Flags.NEXT | (metadata ? Frames_1.Flags.METADATA : 0),\n          data: data,\n          metadata: metadata,\n          streamId: streamId\n        }];\n      case 9:\n        _c.sent();\n        metadata = undefined;\n        data = undefined;\n        remaining = fragmentSize;\n        return [3 /*break*/, 8];\n      case 10:\n        return [2 /*return*/];\n    }\n  });\n}\n\nexports.fragmentWithRequestN = fragmentWithRequestN;","map":{"version":3,"names":["require","Frames_1","isFragmentable","payload","fragmentSize","frameType","data","byteLength","metadata","Lengths","METADATA","FrameTypes","REQUEST_STREAM","REQUEST_CHANNEL","REQUEST","exports","fragment","streamId","isComplete","dataLength","_b","_a","firstFrame","PAYLOAD","remaining","metadataLength","Buffer","allocUnsafe","metadataPosition","nextMetadataPosition","Math","min","slice","type","flags","Flags","FOLLOWS","undefined","_c","sent","NEXT","COMPLETE","dataPosition","nextDataPosition","NONE","fragmentWithRequestN","requestN"],"sources":["../src/Fragmenter.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}